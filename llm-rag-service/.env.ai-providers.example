# =============================================================================
# AI PROVIDER CONFIGURATION WITH AUTOMATIC FALLBACK
# =============================================================================
# This file provides comprehensive configuration options for AI providers
# with automatic fallback mechanisms to maximize uptime and performance.
#
# Copy this file to .env and configure your providers.
# Multiple providers can be configured with different priorities.
# The system will automatically fallback to backup providers on failure.

# =============================================================================
# PRIMARY OPENAI PROVIDER
# =============================================================================
# Primary OpenAI provider configuration (highest priority)
OPENAI_API_KEY=sk-your-primary-openai-api-key-here
OPENAI_ORG_ID=org-your-openai-organization-id-here
OPENAI_MODEL=gpt-4
OPENAI_EMBEDDING_MODEL=text-embedding-ada-002
OPENAI_MAX_TOKENS=4000
OPENAI_TEMPERATURE=0.7

# Primary OpenAI Provider Settings
OPENAI_PRIMARY_PRIORITY=1
OPENAI_PRIMARY_ENABLED=true
OPENAI_HEALTH_CHECK_INTERVAL=30000
OPENAI_MAX_RETRIES=3
OPENAI_RETRY_DELAY=1000
OPENAI_TIMEOUT=30000

# Rate Limiting for Primary OpenAI
OPENAI_REQUESTS_PER_MINUTE=60
OPENAI_TOKENS_PER_MINUTE=150000

# =============================================================================
# BACKUP OPENAI PROVIDER
# =============================================================================
# Backup OpenAI provider (different API key/organization for redundancy)
OPENAI_BACKUP_API_KEY=sk-your-backup-openai-api-key-here
OPENAI_BACKUP_ORG_ID=org-your-backup-openai-organization-id-here
OPENAI_BACKUP_MODEL=gpt-3.5-turbo
OPENAI_BACKUP_EMBEDDING_MODEL=text-embedding-ada-002
OPENAI_BACKUP_MAX_TOKENS=4000
OPENAI_BACKUP_TEMPERATURE=0.7

# Backup OpenAI Provider Settings
OPENAI_BACKUP_PRIORITY=2
OPENAI_BACKUP_ENABLED=true
OPENAI_BACKUP_HEALTH_CHECK_INTERVAL=30000
OPENAI_BACKUP_MAX_RETRIES=2
OPENAI_BACKUP_RETRY_DELAY=1500
OPENAI_BACKUP_TIMEOUT=30000

# Rate Limiting for Backup OpenAI
OPENAI_BACKUP_REQUESTS_PER_MINUTE=30
OPENAI_BACKUP_TOKENS_PER_MINUTE=75000

# =============================================================================
# PRIMARY AZURE OPENAI PROVIDER
# =============================================================================
# Azure OpenAI configuration (can be primary or backup depending on priority)
AZURE_OPENAI_API_KEY=your-azure-openai-api-key-here
AZURE_OPENAI_ENDPOINT=https://your-resource-name.openai.azure.com
AZURE_OPENAI_API_VERSION=2024-02-15-preview
AZURE_OPENAI_CHAT_DEPLOYMENT=gpt-4-deployment-name
AZURE_OPENAI_EMBEDDING_DEPLOYMENT=text-embedding-ada-002-deployment-name
AZURE_OPENAI_MAX_TOKENS=4000
AZURE_OPENAI_TEMPERATURE=0.7

# Azure OpenAI Provider Settings
AZURE_OPENAI_PRIORITY=1
AZURE_OPENAI_ENABLED=true
AZURE_OPENAI_HEALTH_CHECK_INTERVAL=30000
AZURE_OPENAI_MAX_RETRIES=3
AZURE_OPENAI_RETRY_DELAY=1000
AZURE_OPENAI_TIMEOUT=30000

# Rate Limiting for Azure OpenAI
AZURE_OPENAI_REQUESTS_PER_MINUTE=120
AZURE_OPENAI_TOKENS_PER_MINUTE=300000

# =============================================================================
# BACKUP AZURE OPENAI PROVIDER
# =============================================================================
# Backup Azure OpenAI instance (different region/resource for redundancy)
AZURE_OPENAI_BACKUP_API_KEY=your-backup-azure-openai-api-key-here
AZURE_OPENAI_BACKUP_ENDPOINT=https://your-backup-resource-name.openai.azure.com
AZURE_OPENAI_BACKUP_API_VERSION=2024-02-15-preview
AZURE_OPENAI_BACKUP_CHAT_DEPLOYMENT=gpt-35-turbo-deployment-name
AZURE_OPENAI_BACKUP_EMBEDDING_DEPLOYMENT=text-embedding-ada-002-backup-deployment-name
AZURE_OPENAI_BACKUP_MAX_TOKENS=4000
AZURE_OPENAI_BACKUP_TEMPERATURE=0.7

# Backup Azure OpenAI Provider Settings
AZURE_OPENAI_BACKUP_PRIORITY=2
AZURE_OPENAI_BACKUP_ENABLED=true
AZURE_OPENAI_BACKUP_HEALTH_CHECK_INTERVAL=30000
AZURE_OPENAI_BACKUP_MAX_RETRIES=2
AZURE_OPENAI_BACKUP_RETRY_DELAY=1500
AZURE_OPENAI_BACKUP_TIMEOUT=30000

# Rate Limiting for Backup Azure OpenAI
AZURE_OPENAI_BACKUP_REQUESTS_PER_MINUTE=60
AZURE_OPENAI_BACKUP_TOKENS_PER_MINUTE=150000

# =============================================================================
# GLOBAL AI PROVIDER SETTINGS
# =============================================================================
# Global settings that apply to all providers

# Fallback Strategy
AI_PROVIDER_FALLBACK_ENABLED=true
AI_PROVIDER_CIRCUIT_BREAKER_ENABLED=true
AI_PROVIDER_CIRCUIT_BREAKER_THRESHOLD=5
AI_PROVIDER_CIRCUIT_BREAKER_TIMEOUT=60000

# Health Monitoring
AI_PROVIDER_HEALTH_CHECK_ENABLED=true
AI_PROVIDER_HEALTH_CHECK_ENDPOINT=/health/ai-providers
AI_PROVIDER_METRICS_ENABLED=true

# Request Timeout and Retry Settings
AI_PROVIDER_DEFAULT_TIMEOUT=30000
AI_PROVIDER_DEFAULT_MAX_RETRIES=3
AI_PROVIDER_DEFAULT_RETRY_DELAY=1000
AI_PROVIDER_EXPONENTIAL_BACKOFF=true

# Load Balancing
AI_PROVIDER_LOAD_BALANCING_ENABLED=false
AI_PROVIDER_LOAD_BALANCING_STRATEGY=round_robin  # round_robin, weighted, least_connections

# Caching
AI_PROVIDER_RESPONSE_CACHING_ENABLED=true
AI_PROVIDER_CACHE_TTL=3600
AI_PROVIDER_CACHE_MAX_SIZE=1000

# Logging and Monitoring
AI_PROVIDER_REQUEST_LOGGING_ENABLED=true
AI_PROVIDER_PERFORMANCE_LOGGING_ENABLED=true
AI_PROVIDER_ERROR_LOGGING_ENABLED=true

# =============================================================================
# VECTOR DATABASE FALLBACK CONFIGURATION
# =============================================================================
# Configure multiple vector databases for redundancy

# Primary Vector Database (Pinecone)
VECTOR_DB_PRIMARY_PROVIDER=pinecone
PINECONE_API_KEY=your-pinecone-api-key-here
PINECONE_ENVIRONMENT=your-pinecone-environment
PINECONE_INDEX_NAME=cognisync-embeddings
PINECONE_NAMESPACE=default
PINECONE_PRIORITY=1
PINECONE_ENABLED=true
PINECONE_HEALTH_CHECK_INTERVAL=60000
PINECONE_MAX_RETRIES=3
PINECONE_TIMEOUT=10000

# Backup Vector Database (Weaviate)
VECTOR_DB_BACKUP_PROVIDER=weaviate
WEAVIATE_URL=http://localhost:8080
WEAVIATE_API_KEY=your-weaviate-api-key-here
WEAVIATE_PRIORITY=2
WEAVIATE_ENABLED=false
WEAVIATE_HEALTH_CHECK_INTERVAL=60000
WEAVIATE_MAX_RETRIES=2
WEAVIATE_TIMEOUT=10000

# Local Vector Database Fallback
VECTOR_DB_LOCAL_FALLBACK_ENABLED=true
VECTOR_DB_LOCAL_SIMILARITY_THRESHOLD=0.7

# =============================================================================
# DEPLOYMENT ENVIRONMENT PRESETS
# =============================================================================
# Uncomment the appropriate preset for your deployment environment

# DEVELOPMENT PRESET
# NODE_ENV=development
# AI_PROVIDER_HEALTH_CHECK_INTERVAL=60000
# AI_PROVIDER_REQUEST_LOGGING_ENABLED=true
# AI_PROVIDER_PERFORMANCE_LOGGING_ENABLED=true

# STAGING PRESET
# NODE_ENV=staging
# AI_PROVIDER_HEALTH_CHECK_INTERVAL=30000
# AI_PROVIDER_CIRCUIT_BREAKER_ENABLED=true
# AI_PROVIDER_METRICS_ENABLED=true

# PRODUCTION PRESET
# NODE_ENV=production
# AI_PROVIDER_HEALTH_CHECK_INTERVAL=15000
# AI_PROVIDER_CIRCUIT_BREAKER_ENABLED=true
# AI_PROVIDER_METRICS_ENABLED=true
# AI_PROVIDER_REQUEST_LOGGING_ENABLED=false
# AI_PROVIDER_PERFORMANCE_LOGGING_ENABLED=true

# =============================================================================
# EXAMPLE CONFIGURATIONS FOR DIFFERENT SCENARIOS
# =============================================================================

# SCENARIO 1: Azure Primary with OpenAI Backup
# AZURE_OPENAI_PRIORITY=1
# OPENAI_PRIMARY_PRIORITY=2
# AZURE_OPENAI_ENABLED=true
# OPENAI_PRIMARY_ENABLED=true

# SCENARIO 2: OpenAI Primary with Azure Backup
# OPENAI_PRIMARY_PRIORITY=1
# AZURE_OPENAI_PRIORITY=2
# OPENAI_PRIMARY_ENABLED=true
# AZURE_OPENAI_ENABLED=true

# SCENARIO 3: Multiple Azure Regions for High Availability
# AZURE_OPENAI_PRIORITY=1
# AZURE_OPENAI_BACKUP_PRIORITY=2
# AZURE_OPENAI_ENABLED=true
# AZURE_OPENAI_BACKUP_ENABLED=true

# SCENARIO 4: Cost Optimization (Cheaper models as backup)
# AZURE_OPENAI_PRIORITY=1  # GPT-4
# OPENAI_BACKUP_PRIORITY=2  # GPT-3.5-turbo
# AZURE_OPENAI_ENABLED=true
# OPENAI_BACKUP_ENABLED=true

# =============================================================================
# MONITORING AND ALERTING
# =============================================================================
# Configure monitoring and alerting for AI providers

# Health Check Endpoints
HEALTH_CHECK_AI_PROVIDERS_ENABLED=true
HEALTH_CHECK_DETAILED_RESPONSE=true

# Metrics Collection
METRICS_AI_PROVIDER_RESPONSE_TIME=true
METRICS_AI_PROVIDER_ERROR_RATE=true
METRICS_AI_PROVIDER_THROUGHPUT=true
METRICS_AI_PROVIDER_COST_TRACKING=true

# Alerting Thresholds
ALERT_AI_PROVIDER_ERROR_RATE_THRESHOLD=0.05  # 5%
ALERT_AI_PROVIDER_RESPONSE_TIME_THRESHOLD=5000  # 5 seconds
ALERT_AI_PROVIDER_DOWNTIME_THRESHOLD=300000  # 5 minutes

# Webhook for Alerts
ALERT_WEBHOOK_URL=https://your-monitoring-system.com/webhooks/ai-providers
ALERT_WEBHOOK_ENABLED=false

# =============================================================================
# SECURITY SETTINGS
# =============================================================================
# Security settings for AI provider communications

# API Key Rotation
API_KEY_ROTATION_ENABLED=false
API_KEY_ROTATION_INTERVAL=2592000000  # 30 days in milliseconds

# Request Encryption
AI_PROVIDER_REQUEST_ENCRYPTION_ENABLED=false
AI_PROVIDER_RESPONSE_ENCRYPTION_ENABLED=false

# Audit Logging
AI_PROVIDER_AUDIT_LOGGING_ENABLED=true
AI_PROVIDER_AUDIT_LOG_RETENTION_DAYS=90

# =============================================================================
# PERFORMANCE OPTIMIZATION
# =============================================================================
# Performance optimization settings

# Connection Pooling
AI_PROVIDER_CONNECTION_POOL_SIZE=10
AI_PROVIDER_CONNECTION_POOL_TIMEOUT=30000

# Request Batching
AI_PROVIDER_BATCH_REQUESTS_ENABLED=false
AI_PROVIDER_BATCH_SIZE=10
AI_PROVIDER_BATCH_TIMEOUT=1000

# Response Compression
AI_PROVIDER_RESPONSE_COMPRESSION_ENABLED=true

# Keep-Alive Connections
AI_PROVIDER_KEEP_ALIVE_ENABLED=true
AI_PROVIDER_KEEP_ALIVE_TIMEOUT=60000